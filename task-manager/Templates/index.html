{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='home.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>  
{% endblock %}

{% block body %}
<header> ðŸ“‹ Task Manager </header>

<main class="table-responsive">
  {% if results %}
    <table class="table table-hover text-center align-middle task-table">
      <tbody>
        {% for row in results %}
          <tr data-id="{{ row[0] }}" data-task="{{ row[1] }}" data-desc="{{ row[2] }}" data-date="{{ row[3] }}">
            <!-- Trash icon -->
            <td class="icon-cell">
              <a href="{{ url_for('delete', id=row[0]) }}">
                <i class="fa-solid fa-trash text-danger"></i>
              </a>
            </td>

            <!-- Task text -->
            <td class="task-text"><span>{{ row[1] }}</span></td>

            <!-- Info icon -->
            <td class="icon-cell">
              <i class="fa-solid fa-circle-info text-primary info-btn"></i>
            </td>

            <!-- Complete (checkbox) -->
            <td class="icon-cell">
              <input type="checkbox" class="complete-btn">
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <div class="no-data">
      <p><b>No Task left</b></p>
    </div>
  {% endif %}

  <!-- Floating add button -->
  <button class="add-btn" onclick="window.location.href='/add'"><i class="fa-solid fa-plus"></i></button>
</main>

<!-- Info popup + backdrop OUTSIDE table -->
<div id="backdrop" class="hidden"></div>
<div id="info-box" class="info-box hidden">
  <button type="button" class="info-close" aria-label="Close">&times;</button>
  <div id="info-content"></div>
</div>

<footer>
  <span id="task-count">{{ results|length }} </span> Task(s) Left
</footer>

<script src="{{ url_for('static', filename='home_script.js') }}"></script>
{% endblock %}